<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 1: Email Security - Digital Shield Training</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/modules.css">
    
</head>
<body class="module-page">
    <!-- Header Navigation -->
    <header class="module-header">
        <div class="container">
            <div class="module-nav">
                <button onclick="returnToMissionControl()" class="nav-btn back">
                    <img src="images/interface/navigation-back.png" alt="Back"> Mission Control
                </button>
                <div class="module-info">
                    <h1>MODULE 01: EMAIL SECURITY</h1>
                    <p class="module-subtitle">The Interceptor Protocol</p>
                </div>
                <div class="module-progress-nav">
                    <span class="progress-text">Progress: <span id="module-progress">0%</span></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Mission Briefing Section -->
    <section id="briefing-section" class="training-section active">
        <div class="container">
            <div class="section-header">
                <img src="images/content/email-security-icon.png" alt="Email Security" class="section-icon">
                <h2>MISSION BRIEFING</h2>
                <p>Intelligence Report: Email-Based Threats</p>
            </div>
            
            <div class="briefing-content">
                <div class="threat-assessment-fixed">
                    <h3>üö® THREAT LEVEL: HIGH</h3>
                    <p>Email attacks represent <strong>95% of all cybersecurity breaches</strong> in the food manufacturing sector. Our honey production facilities and customer data are prime targets for cybercriminals.</p>
                    
                    <div class="briefing-stats">
                        <div class="stat-card">
                            <h4>96%</h4>
                            <p>Of phishing attacks arrive via email</p>
                        </div>
                        <div class="stat-card">
                            <h4>¬£2.7M</h4>
                            <p>Average cost of a UK data breach</p>
                        </div>
                        <div class="stat-card">
                            <h4>12 SECONDS</h4>
                            <p>How often a new phishing site goes live</p>
                        </div>
                    </div>
                </div>

                <div class="instructor-message-fixed">
                    <div class="instructor-avatar">
                        <img src="images/characters/instructor-avatar.png" alt="Security Instructor">
                    </div>
                    <div class="message-content">
                        <h4>INSTRUCTOR BRIEFING</h4>
                        <p>Email security is your first line of defence. Master these skills and you'll protect not just yourself, but our entire honey production operation.</p>
                        <p><strong>Remember:</strong> Every email could be a potential threat. Stay alert, stay secure.</p>
                    </div>
                </div>

                <button onclick="startTraining()" class="section-btn primary">
                    BEGIN TRAINING
                </button>
            </div>
        </div>
    </section>

    <!-- Training Phase 1: Understanding Email Threats -->
    <section id="training-phase-1" class="training-section">
        <div class="container">
            <div class="section-header">
                <img src="images/characters/hacker-silhouette.png" alt="Email Threats" class="section-icon">
                <h2>PHASE 1: KNOW YOUR ENEMY</h2>
                <p>Understanding Email-Based Threats</p>
                <div class="phase-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 25%;"></div>
                    </div>
                </div>
            </div>

            <div class="learning-cards">
                <div class="threat-card" data-threat="phishing">
                    <div class="threat-header">
                        <img src="images/characters/hacker-silhouette.png" alt="Phishing" class="threat-icon-img">
                        <h3>PHISHING ATTACKS</h3>
                        <span class="threat-level high">HIGH RISK</span>
                    </div>
                    <div class="threat-content">
                        <p><strong>Method:</strong> Fraudsters impersonate trusted sources to steal credentials or sensitive data.</p>
                        <p><strong>Target:</strong> Employee login details, customer information, financial data.</p>
                        <p><strong>Warning Signs:</strong></p>
                        <ul>
                            <li>Generic greetings ("Dear Customer")</li>
                            <li>Urgent language creating false deadlines</li>
                            <li>Requests for sensitive information</li>
                            <li>Suspicious links or attachments</li>
                        </ul>
                    </div>
                </div>

                <div class="threat-card" data-threat="spear-phishing">
                    <div class="threat-header">
                        <img src="images/characters/hacker-silhouette.png" alt="Spear Phishing" class="threat-icon-img">
                        <h3>SPEAR PHISHING</h3>
                        <span class="threat-level critical">CRITICAL</span>
                    </div>
                    <div class="threat-content">
                        <p><strong>Method:</strong> Highly targeted attacks using personal information to seem legitimate.</p>
                        <p><strong>Target:</strong> Specific individuals or departments within Hilltop Honey.</p>
                        <p><strong>Warning Signs:</strong></p>
                        <ul>
                            <li>Uses your name and job title</li>
                            <li>References current projects or colleagues</li>
                            <li>Appears to come from known contacts</li>
                            <li>Creates believable scenarios</li>
                        </ul>
                    </div>
                </div>

                <div class="threat-card" data-threat="malware">
                    <div class="threat-header">
                        <img src="images/characters/hacker-silhouette.png" alt="Malware" class="threat-icon-img">
                        <h3>MALWARE ATTACHMENTS</h3>
                        <span class="threat-level high">HIGH RISK</span>
                    </div>
                    <div class="threat-content">
                        <p><strong>Method:</strong> Malicious files disguised as legitimate documents or applications.</p>
                        <p><strong>Target:</strong> Network access, data theft, system disruption.</p>
                        <p><strong>Warning Signs:</strong></p>
                        <ul>
                            <li>Unexpected attachments</li>
                            <li>Unusual file extensions (.exe, .scr, .zip)</li>
                            <li>Files from unknown senders</li>
                            <li>Suspicious file names</li>
                        </ul>
                    </div>
                </div>

                <div class="threat-card" data-threat="business-email">
                    <div class="threat-header">
                        <img src="images/characters/hacker-silhouette.png" alt="Business Email" class="threat-icon-img">
                        <h3>BUSINESS EMAIL COMPROMISE</h3>
                        <span class="threat-level critical">CRITICAL</span>
                    </div>
                    <div class="threat-content">
                        <p><strong>Method:</strong> Criminals impersonate executives or suppliers to authorize fraudulent payments.</p>
                        <p><strong>Target:</strong> Financial transactions, supplier payments, payroll.</p>
                        <p><strong>Warning Signs:</strong></p>
                        <ul>
                            <li>Urgent payment requests</li>
                            <li>Changes to banking details</li>
                            <li>Unusual language or tone</li>
                            <li>Bypassing normal approval processes</li>
                        </ul>
                    </div>
                </div>
            </div>

            <button onclick="completePhase(1)" class="section-btn primary">
                CONTINUE TO PHASE 2
            </button>
        </div>
    </section>

    <!-- Training Phase 2: Red Flag Detection -->
    <section id="training-phase-2" class="training-section">
        <div class="container">
            <div class="section-header">
                <img src="images/interface/progress-complete.png" alt="Detection Training" class="section-icon">
                <h2>PHASE 2: RED FLAG DETECTION</h2>
                <p>Interactive Threat Identification Training</p>
                <div class="phase-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 50%;"></div>
                    </div>
                </div>
            </div>

            <div class="red-flags-training">
                <div class="training-instructions">
                    <h3>üîç EMAIL ANALYSIS TRAINING</h3>
                    <p>Use your cursor to scan the email below and identify suspicious elements. Click on anything that seems suspicious to mark it as a red flag.</p>
                </div>

                <div class="email-scanner">
                    <div class="example-email suspicious">
                        <div class="email-header">
                            <p><strong>From:</strong> <span class="scannable-hidden" data-flag="sender">security@hiltophonney.com</span></p>
                            <p><strong>To:</strong> all-staff@hilltophoney.com</p>
                            <p><strong>Subject:</strong> <span class="scannable-hidden" data-flag="subject">URGENT: Account Verification Required</span></p>
                            <p><strong>Date:</strong> Today, 3:47 AM</p>
                        </div>
                        <div class="email-body">
                            <p>Dear <span class="scannable-hidden" data-flag="greeting">Valued Employee</span>,</p>
                            <p>We have detected <span class="scannable-hidden" data-flag="urgency">suspicious activity</span> on your account and need you to verify your login details immediately.</p>
                            <p>Please <span class="scannable-hidden" data-flag="request">click here to verify your login details</span> within the next 24 hours.</p>
                            <p><span class="scannable-hidden" data-flag="link">www.hiltophonney-secure.com/verify</span></p>
                            <p>Failure to act will result in account suspension.</p>
                            <p>Best regards,<br>Security Team</p>
                        </div>
                    </div>

                    <div class="scanner-feedback" id="scanner-feedback">
                        <p>Red flags found: <span id="flags-found">0</span>/6</p>
                        <div id="flag-explanations"></div>
                    </div>
                </div>

                <button onclick="completePhase(2)" class="section-btn primary" id="phase-2-btn" disabled>
                    PHASE 2 COMPLETE
                </button>
            </div>
        </div>
    </section>

    <!-- Training Phase 3: Safe Email Practices -->
    <section id="training-phase-3" class="training-section">
        <div class="container">
            <div class="section-header">
                <img src="images/content/email-security-icon.png" alt="Safe Practices" class="section-icon">
                <h2>PHASE 3: DEFENSIVE PROTOCOLS</h2>
                <p>Safe Email Practices for Agents</p>
                <div class="phase-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 75%;"></div>
                    </div>
                </div>
            </div>

            <div class="best-practices">
                <div class="practice-section">
                    <h3>‚úÖ BEFORE YOU CLICK</h3>
                    <div class="practice-grid">
                        <div class="practice-card">
                            <div class="practice-icon">üëÄ</div>
                            <h4>VERIFY THE SENDER</h4>
                            <p>Check the full email address, not just the display name. When in doubt, contact the sender through a different communication method.</p>
                        </div>
                        <div class="practice-card">
                            <div class="practice-icon">üîç</div>
                            <h4>HOVER OVER LINKS</h4>
                            <p>Never click immediately. Hover to see the real destination. Legitimate links should match the claimed source.</p>
                        </div>
                        <div class="practice-card">
                            <div class="practice-icon">ü§î</div>
                            <h4>QUESTION URGENCY</h4>
                            <p>Legitimate urgent requests rarely come via email alone. If it's truly urgent, you'll likely receive a phone call too.</p>
                        </div>
                        <div class="practice-card">
                            <div class="practice-icon">üõ°Ô∏è</div>
                            <h4>VERIFY ATTACHMENTS</h4>
                            <p>Only open attachments you're expecting. Scan all files with antivirus before opening. When in doubt, don't open.</p>
                        </div>
                    </div>
                </div>

                <div class="incident-response">
                    <h3>üö® IF YOU SUSPECT A THREAT</h3>
                    <div class="response-steps">
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>STOP</h4>
                                <p>Do NOT reply to the email. Do NOT click any links or download attachments.</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>ISOLATE</h4>
                                <p>Mark the email as spam/phishing. Do not delete it yet - IT may need to investigate.</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>REPORT</h4>
                                <p>Forward the suspicious email to IT support immediately. Include your concerns in the message.</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4>WARN OTHERS</h4>
                                <p>If the email appears to target your department or colleagues, alert them verbally or through secure channels.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <button onclick="completePhase(3)" class="section-btn primary" id="phase-3-btn" disabled>
                    PHASE 3 COMPLETE
                </button>
            </div>
        </div>
    </section>

    <!-- Final Assessment Phase -->
    <section id="assessment-phase" class="training-section">
        <div class="container">
            <div class="section-header">
                <!-- PLACEHOLDER IMAGE FOR FINAL ASSESSMENT -->
                <div style="width: 64px; height: 64px; background: linear-gradient(45deg, #f39c12, #e67e22); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px auto; font-size: 24px; color: white;">üéØ</div>
                <h2>FINAL ASSESSMENT</h2>
                <p>Email Security Knowledge Test</p>
                <div class="phase-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%;"></div>
                    </div>
                </div>
            </div>

            <div class="assessment-content">
                <div class="assessment-intro">
                    <h3>üéØ FIELD TEST: Email Threat Assessment</h3>
                    <p>You will analyze 4 emails and determine which are safe and which are threats. Make your decisions carefully - each choice affects your final score.</p>
                </div>

                <div class="email-assessment" id="email-assessment">
                    <!-- Assessment emails will be populated by JavaScript -->
                </div>

                <div class="assessment-results" id="assessment-results" style="display: none;">
                    <!-- Results will be shown here -->
                </div>
            </div>
        </div>
    </section>

    <script>
        // Module 1 JavaScript Functions
        let currentPhase = 0;
        let redFlagsFound = 0;
        let assessmentEmails = [];
        let currentAssessmentEmail = 0;
        let assessmentScore = 0;
        let assessmentComplete = false;

        // Navigation functions
        function returnToMissionControl() {
            window.location.href = 'index.html';
        }

        function startTraining() {
            showSection('training-phase-1');
            updateProgress(1);
        }

        function completePhase(phase) {
            updateProgress(phase + 1);
            
            if (phase === 1) {
                showSection('training-phase-2');
            } else if (phase === 2) {
                showSection('training-phase-3');
            } else if (phase === 3) {
                showSection('assessment-phase');
                initializeAssessment();
            }
        }

        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.training-section');
            sections.forEach(section => section.classList.remove('active'));
            
            // Show target section
            document.getElementById(sectionId).classList.add('active');
        }

        function updateProgress(step) {
            const percentage = ((step - 1) / 3) * 100;
            document.getElementById('module-progress').textContent = `${Math.round(percentage)}%`;
        }

        // Red flag detection training
        function initializeRedFlagDetection() {
            const hiddenElements = document.querySelectorAll('.scannable-hidden');
            hiddenElements.forEach(element => {
                element.addEventListener('click', function() {
                    if (!this.classList.contains('found')) {
                        this.classList.add('found');
                        redFlagsFound++;
                        updateRedFlagFeedback(this.dataset.flag);
                        
                        if (redFlagsFound >= 6) {
                            document.getElementById('phase-2-btn').disabled = false;
                        }
                    }
                });
            });
        }

        function updateRedFlagFeedback(flag) {
            document.getElementById('flags-found').textContent = redFlagsFound;
            
            const explanations = {
                'sender': 'Misspelled domain name - "hiltophonney" instead of "hilltophoney"',
                'subject': 'Creates false urgency to pressure quick action',
                'greeting': 'Generic greeting instead of your actual name',
                'urgency': 'Suspicious activity claims designed to create panic',
                'request': 'Requests sensitive login verification via email',
                'link': 'Suspicious URL that doesn\'t match our real domain'
            };
            
            const explanationDiv = document.getElementById('flag-explanations');
            const flagDiv = document.createElement('div');
            flagDiv.className = 'flag-explanation';
            flagDiv.innerHTML = `<strong>Red Flag:</strong> ${explanations[flag]}`;
            explanationDiv.appendChild(flagDiv);
        }

        // Assessment functions
        function initializeAssessment() {
            assessmentEmails = [
                {
                    id: 1,
                    from: "supplier@honeyextractors.co.uk",
                    subject: "Updated Invoice #HE-2024-0847",
                    content: "Dear Hilltop Honey, Please find attached our updated invoice for the recent honey extraction equipment order. Payment terms remain net 30 days. Best regards, Sarah Johnson, Honey Extractors Ltd.",
                    legitimate: true,
                    explanation: "Legitimate business email from a known supplier with specific details."
                },
                {
                    id: 2,
                    from: "security@hiltop-honey.secure.com",
                    subject: "URGENT: Verify Account Now",
                    content: "Your account will be suspended unless you verify immediately. Click here: verify-now.suspicioussite.com",
                    legitimate: false,
                    explanation: "Phishing attempt with misspelled domain, urgent language, and suspicious link."
                },
                {
                    id: 3,
                    from: "hr@hilltophoney.com",
                    subject: "Holiday Schedule 2024",
                    content: "Team, Please review the attached 2024 holiday schedule. Note the additional closure days around Christmas. Any questions, please ask. Thanks, Michelle (HR)",
                    legitimate: true,
                    explanation: "Internal HR communication with appropriate content and sender."
                },
                {
                    id: 4,
                    from: "ceo@hilltophoney.com",
                    subject: "Urgent Wire Transfer Required",
                    content: "I need you to wire ¬£50,000 to our new supplier immediately. Details: Account 12345678, Sort 20-20-20. This is confidential. Don't call me, I'm in meetings all day.",
                    legitimate: false,
                    explanation: "Business Email Compromise attempt - unusual financial request with instructions not to verify."
                }
            ];
            
            showAssessmentEmail();
        }

        function showAssessmentEmail() {
            if (currentAssessmentEmail >= assessmentEmails.length) {
                showAssessmentResults();
                return;
            }
            
            const email = assessmentEmails[currentAssessmentEmail];
            const assessmentDiv = document.getElementById('email-assessment');
            
            assessmentDiv.innerHTML = `
                <div class="assessment-email">
                    <h4>Email ${currentAssessmentEmail + 1} of ${assessmentEmails.length}</h4>
                    <div class="email-preview">
                        <p><strong>From:</strong> ${email.from}</p>
                        <p><strong>Subject:</strong> ${email.subject}</p>
                        <p><strong>Content:</strong> ${email.content}</p>
                    </div>
                    <div class="assessment-question">
                        <h4>Is this email safe or suspicious?</h4>
                        <div class="action-buttons">
                            <button onclick="assessEmail(true)" class="assess-btn safe">
                                ‚úÖ SAFE
                            </button>
                            <button onclick="assessEmail(false)" class="assess-btn suspicious">
                                ‚ö†Ô∏è SUSPICIOUS
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function assessEmail(userChoice) {
            const email = assessmentEmails[currentAssessmentEmail];
            const correct = (userChoice === email.legitimate);
            
            if (correct) {
                assessmentScore += 25; // 100% / 4 emails = 25% each
            }
            
            showEmailFeedback(email, userChoice, correct);
            currentAssessmentEmail++;
            
            setTimeout(() => {
                showAssessmentEmail();
            }, 3000);
        }

        function showEmailFeedback(email, userChoice, correct) {
            const assessmentDiv = document.getElementById('email-assessment');
            const feedbackClass = correct ? 'correct' : 'incorrect';
            const resultText = correct ? 'CORRECT!' : 'INCORRECT';
            const choiceText = userChoice ? 'marked as SAFE' : 'marked as SUSPICIOUS';
            const actualText = email.legitimate ? 'actually SAFE' : 'actually SUSPICIOUS';
            
            const feedbackHtml = `
                <div class="assessment-feedback ${feedbackClass}">
                    <h3>${resultText}</h3>
                    <p>You ${choiceText}, and this email is ${actualText}.</p>
                    <div class="explanation">
                        <strong>Explanation:</strong> ${email.explanation}
                    </div>
                </div>
            `;
            
            assessmentDiv.innerHTML += feedbackHtml;
        }

        function showAssessmentResults() {
            const resultsDiv = document.getElementById('assessment-results');
            let grade, message;
            
            if (assessmentScore >= 75) {
                grade = 'EXPERT';
                message = 'Excellent! You have mastered email security.';
            } else if (assessmentScore >= 50) {
                grade = 'PROFICIENT';
                message = 'Good work! You understand email security basics.';
            } else {
                grade = 'NEEDS IMPROVEMENT';
                message = 'Consider reviewing the training materials.';
            }
            
            resultsDiv.innerHTML = `
                <div class="assessment-completion">
                    <h2>üéØ ASSESSMENT COMPLETE</h2>
                    <div class="score-display">
                        <div class="score-circle">
                            <span class="score-number">${assessmentScore}%</span>
                            <span class="grade">${grade}</span>
                        </div>
                    </div>
                    <p>${message}</p>
                    <button onclick="completeModule1()" class="section-btn primary">
                        COMPLETE MODULE 1
                    </button>
                </div>
            `;
            
            resultsDiv.style.display = 'block';
        }

        function completeModule1() {
            alert('üéâ Congratulations! You have successfully completed Module 1: Email Security. Return to Mission Control to continue your training.');
            returnToMissionControl();
        }

        // Initialize the module
        document.addEventListener('DOMContentLoaded', function() {
            updateProgress(1);
            initializeRedFlagDetection();
        });
    </script>
</body>
</html>
